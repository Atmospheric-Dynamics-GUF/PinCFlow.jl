l2 = (
    dkr = 0.0014210304f0,
    dlr = 0.0014214969f0,
    dmr = 0.0037753102f0,
    dxr = 582395.44f0,
    dyr = 582382.3f0,
    dzr = 15302.3125f0,
    kr = 0.01421127f0,
    lr = 3.142793f-6,
    mr = 0.037674654f0,
    n2 = 0.010105867f0,
    nr = 3.0217367f14,
    p = 5974.1997f0,
    pip = 0.0005064396f0,
    rhobar = 17.037529f0,
    rhop = 0.0007409268f0,
    t = 3600.0f0,
    thetabar = 13598.31f0,
    us = 447.22305f0,
    vs = 0.23864196f0,
    wts = 0.031899933f0,
    x = 363318.03f0,
    xr = 472561.34f0,
    y = 363318.03f0,
    yr = 494807.94f0,
    z = 364706.28f0,
    zr = 146415.8f0,
    ztilde = 392441.75f0,
)
linf = (
    dkr = 6.291288f-5,
    dlr = 6.286574f-5,
    dmr = 0.00016849968f0,
    dxr = 40000.0f0,
    dyr = 40000.0f0,
    dzr = 1996.0245f0,
    kr = 0.0006291298f0,
    lr = 3.95314f-7,
    mr = 0.0016835425f0,
    n2 = 0.0003195756f0,
    nr = 1.5719316f13,
    p = 321.19855f0,
    pip = 5.215451f-5,
    rhobar = 1.0363692f0,
    rhop = 0.00028176993f0,
    t = 3600.0f0,
    thetabar = 556.8878f0,
    us = 10.1511965f0,
    vs = 0.06665016f0,
    wts = 0.008938266f0,
    x = 180000.0f0,
    xr = 29970.227f0,
    y = 180000.0f0,
    yr = 30020.98f0,
    z = 19001.988f0,
    zr = 11888.189f0,
    ztilde = 20000.0f0,
)
reference = (l2, linf)

@testset "wkb_mountain_wave" begin
    test_example(
        joinpath(submit_directory, "wkb_mountain_wave.jl"),
        reference,
        :x_size => 10,
        :y_size => 10,
        :z_size => 10,
        :output => OutputNamelist(; prepare_restart = true),
    )
end
